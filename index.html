<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AppSphere</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* === KUNCI TAMPILAN (HP VIEW DI SEMUA LAYAR) === */
        body { 
            background-color: #000; 
            margin: 0; padding: 0;
            display: flex; justify-content: center;
            min-height: 100vh;
            font-family: 'Segoe UI', sans-serif;
            padding-bottom: 60px; /* Ruang untuk NAVIGASI BAWAH FIXED */
        }
        #mobile-frame {
            width: 100%; max-width: 480px; 
            background-color: #0a0e17; 
            min-height: 100vh; 
            position: relative;
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.1);
            overflow-x: hidden;
        }

        /* HEADER */
        .app-header { background: rgba(10, 14, 23, 0.98); padding: 15px 20px; position: sticky; top: 0; z-index: 999; border-bottom: 1px solid #1c263d; }
        .logo-text { font-size: 22px; font-weight: 800; background: linear-gradient(45deg, #4facfe, #a6c1ee); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-decoration: none; }
        .search-box { background: #131a2a; border: 1px solid #2a3a5a; border-radius: 10px; color: #fff; padding: 10px 15px; width: 100%; outline: none; margin-top: 10px; }
        .search-box:focus { border-color: #4facfe; }

        /* KONTEN & PRODUK LIST (LAYOUT BARU FOTO 1) */
        .hero-container { padding: 20px; }
        .hero-banner { width: 100%; height: auto; display: block; border-radius: 12px; border: 1px solid #1c263d; }
        .produk-container { padding: 0 20px 20px 20px; }
        .product-group-title { color: #fff; font-size: 18px; font-weight: bold; margin-bottom: 15px; margin-top: 25px; }
        .list-product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .list-product-card { 
            background: #131a2a; border: 1px solid #1c263d; border-radius: 12px; overflow: hidden; cursor: pointer;
            display: flex; flex-direction: column; align-items: center; text-align: center; padding: 10px;
            position: relative; height: 130px; /* Diperbaiki agar seragam */
        }
        .list-product-card img { width: 60px; height: 60px; object-fit: cover; border-radius: 12px; margin-bottom: 8px; }
        .product-badge { position: absolute; top: 10px; left: 10px; font-size: 10px; font-weight: bold; padding: 2px 6px; border-radius: 6px; background: #4facfe; color: #000; }
        .product-name-list { font-size: 13px; color: #fff; font-weight: 600; margin-bottom: 0; }
        .product-price-list { font-size: 11px; color: #64748b; }


        /* CAROUSEL HOT (Dipertahankan sebagai list horizontal scroll) */
        .hot-container { padding: 0 20px 20px 20px; display: none; position: relative; }
        #hot-list { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; scroll-behavior: smooth; scrollbar-width: none; -ms-overflow-style: none; }
        #hot-list::-webkit-scrollbar { display: none; }
        .card-hot { min-width: calc(33.33% - 7px); width: calc(33.33% - 7px); height: 170px; background: linear-gradient(135deg, #131a2a, #1c263d); border: 1px solid #ff9f43; border-radius: 12px; overflow: hidden; position: relative; cursor: pointer; flex-shrink: 0; }
        .card-hot img { height: 90px; object-fit: cover; }
        .badge-hot { position: absolute; top: 5px; left: 5px; background: #ff9f43; color: #000; font-size: 9px; padding: 2px 6px; border-radius: 4px; font-weight: bold; z-index: 2; }
        
        .filter-scroll { overflow-x: auto; white-space: nowrap; padding: 0 20px 15px 20px; scrollbar-width: none; }
        .filter-scroll::-webkit-scrollbar { display: none; }
        .btn-filter { display: inline-block; padding: 6px 15px; margin-right: 8px; background: #131a2a; border: 1px solid #2a3a5a; border-radius: 20px; color: #a0aec0; font-size: 12px; cursor: pointer; }
        .btn-filter.active { background: #4facfe; color: #000; font-weight: bold; border-color: #4facfe; }

        /* NAVIGASI BAWAH: FIXED DI DASAR LAYAR */
        .bottom-nav { position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 480px; height: 60px; background: #0a0e17; border-top: 1px solid #1c263d; display: flex; justify-content: space-around; align-items: center; z-index: 2000; }
        .nav-item { text-align: center; color: #64748b; font-size: 10px; cursor: pointer; text-decoration: none; }
        .nav-item i { font-size: 18px; display: block; margin-bottom: 2px; }
        .nav-item.active { color: #4facfe; }
    </style>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyB-cU3n9GQiO5dyaXgLF3mwGFPZ6ACqQds",
          authDomain: "appsphere-de73d.firebaseapp.com",
          databaseURL: "https://appsphere-de73d-default-rtdb.firebaseio.com",
          projectId: "appsphere-de73d",
          storageBucket: "appsphere-de73d.firebasestorage.app",
          messagingSenderId: "610562583858",
          appId: "1:610562583858:web:7e252865c692af00783b2b",
          measurementId: "G-84ZR60FM03"
        };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const dbRef = firebase.database().ref('produk');
        let db = [];
        dbRef.on('value', (s) => {
            const d = s.val(); db = [];
            if(d) Object.keys(d).forEach(k => db.push({id:k, ...d[k]}));
            render('Semua');
            renderHot(); 
        });
    </script>
</head>
<body>
    <div id="mobile-frame">
        <div class="app-header">
            <div class="d-flex justify-content-between align-items-center">
                <a href="index.html" class="logo-text"><i class="fas fa-cube me-2"></i>AppSphere</a>
                <a href="login.html" class="text-secondary"><i class="fas fa-user-circle fa-lg"></i></a>
            </div>
            <input type="text" id="searchInput" class="search-box" placeholder="Cari produk..." onkeyup="cariProduk()">
        </div>

        <div class="hero-container"><img src="banner.png" class="hero-banner" alt="Banner Promo" onerror="this.style.display='none'"></div>

        <div class="filter-scroll">
            <div class="btn-filter active" onclick="filterProduk('Semua', this)">Semua</div>
            <div class="btn-filter" onclick="filterProduk('Streaming', this)">Streaming</div>
            <div class="btn-filter" onclick="filterProduk('Editing', this)">Editing</div>
            <div class="btn-filter" onclick="filterProduk('AI Tools', this)">AI Tools</div>
            <div class="btn-filter" onclick="filterProduk('Utility', this)">Utility</div>
            <div class="btn-filter" onclick="filterProduk('Sosmed', this)">Sosmed</div>
            <div class="btn-filter" onclick="filterProduk('VPN', this)">VPN</div>
        </div>

        <div id="hot-area" class="hot-container">
            <h6 class="text-white fw-bold mb-2"><i class="fas fa-fire text-warning me-1"></i> Lagi Panas! üî•</h6>
            <div id="hot-list"></div>
            <div class="text-center small mt-2 text-muted">‚Üê Geser untuk lihat semua ‚Üí</div>
        </div>

        <div class="produk-container">
            <h6 class="product-group-title">SEMUA PRODUK</h6>
            <div id="areaProduk" class="list-product-grid"></div>
        </div>
        <div id="msgKosong" class="text-center mt-5 text-secondary" style="display:none;"><i class="fas fa-box-open fa-3x mb-3"></i><p>Produk tidak ditemukan.</p></div>

    </div> 

    <div class="bottom-nav">
        <div class="nav-item" onclick="alert('Ini adalah tombol Cara Order')"><i class="fas fa-book"></i><span>Cara Order</span></div>
        <div class="nav-item active" onclick="location.reload()"><i class="fas fa-home"></i><span>Home</span></div>
        <a href="testimoni.html" class="nav-item"><i class="fas fa-star"></i><span>Testimoni</span></a>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function cariProduk() { renderGrid(db.filter(p => p.nama.toLowerCase().includes(document.getElementById('searchInput').value.toLowerCase()))); }
        function filterProduk(c, el) { document.querySelectorAll('.btn-filter').forEach(b => b.classList.remove('active')); el.classList.add('active'); render(c); }
        function render(c) { renderGrid(c === 'Semua' ? db : db.filter(p => p.kat === c)); }

        // --- FUNGSI RENDER HOME DENGAN LIST STYLE ---
        function renderGrid(d) {
            let h = document.getElementById('areaProduk'); h.innerHTML = '';
            if(d.length === 0) return document.getElementById('msgKosong').style.display = 'block';
            document.getElementById('msgKosong').style.display = 'none';
            d.forEach((p) => {
                let pr = p.varian ? p.varian[0].harga : p.harga;
                h.innerHTML += `
                <div class="list-product-card" onclick="cekProduk('${p.id}')">
                    <div class="product-badge">${p.kat}</div>
                    <img src="${p.img}" onerror="this.src='https://via.placeholder.com/60'">
                    <div class="product-name-list">${p.nama}</div>
                    <div class="product-price-list">Mulai Rp ${parseInt(pr).toLocaleString()}</div>
                </div>`;
            });
        }
        // --------------------------------------------------------

        function renderHot() {
            let hot = db.filter(p => p.isHot === true);
            let area = document.getElementById('hot-area');
            let list = document.getElementById('hot-list');
            list.innerHTML = "";
            
            if(hot.length > 0) {
                area.style.display = 'block';
                hot.forEach(p => {
                    list.innerHTML += `
                    <div class="card-hot" onclick="cekProduk('${p.id}')">
                        <div class="badge-hot">HOT</div>
                        <img src="${p.img}" class="w-100" onerror="this.src='https://via.placeholder.com/150'">
                        <div class="p-2">
                            <div class="text-white small text-truncate fw-bold">${p.nama}</div>
                            <div class="text-warning small fw-bold" style="font-size:10px;">Rp ${parseInt(p.varian[0].harga).toLocaleString()}</div>
                        </div>
                    </div>`;
                });
            } else { area.style.display = 'none'; }
        }
        
        // --- NAVIGASI KE DETAIL.HTML DENGAN ID PRODUK ---
        function cekProduk(id) {
            window.location.href = "detail.html?id=" + id;
        }
    </script>
</body>
</html>
